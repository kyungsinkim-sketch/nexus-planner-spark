# Smart Call â€” Phone Feature Architecture

> ì „í™”ê±°ëŠ” ê¸°ëŠ¥: ì „í™”ë²ˆí˜¸ë¶€ â†’ ì „í™” ê±¸ê¸° â†’ ìë™ ë…¹ìŒ â†’ ë¶„ì„ â†’ ì¶”ì¶œ

## Platform Constraints

### iOS
- âŒ ì‹œìŠ¤í…œ ì „í™” ë…¹ìŒ ë¶ˆê°€ (Apple ì •ì±…)
- âœ… CallKitìœ¼ë¡œ VoIP ì „í™” ê°€ëŠ¥ (ë…¹ìŒ ì œì–´ ê°€ëŠ¥)
- âœ… ìŠ¤í”¼ì»¤í° + ë§ˆì´í¬ ë…¹ìŒ (workaround)

### Android
- âš ï¸ Android 9+ ì „í™” ë…¹ìŒ ì œí•œ (Accessibility Service í•„ìš”)
- âœ… RECORD_AUDIO + READ_CONTACTS í¼ë¯¸ì…˜ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
- âœ… MediaRecorderë¡œ ë§ˆì´í¬ ìº¡ì²˜ (ìŠ¤í”¼ì»¤í° ëª¨ë“œ)

## MVP Strategy: "ìŠ¤í”¼ì»¤í° ìë™ ë…¹ìŒ"

ê°€ì¥ ë¹ ë¥´ê²Œ êµ¬í˜„ ê°€ëŠ¥í•œ ë°©ì‹:

```
1. ì—°ë½ì²˜ ì ‘ê·¼ â†’ ì „í™”ë²ˆí˜¸ í‘œì‹œ
2. ì „í™” ê±¸ê¸° (ì‹œìŠ¤í…œ ë‹¤ì´ì–¼ëŸ¬ í˜¸ì¶œ)
3. ë™ì‹œì— ì•± ë‚´ ë§ˆì´í¬ ë…¹ìŒ ìë™ ì‹œì‘ (ìŠ¤í”¼ì»¤í° ëª¨ë“œ ì•ˆë‚´)
4. ì „í™” ì¢…ë£Œ ê°ì§€ â†’ ë…¹ìŒ ì¢…ë£Œ
5. ìë™ íŒŒì´í”„ë¼ì¸: Upload â†’ STT â†’ Brain â†’ RAG Ingest
```

## Implementation Plan

### Phase A: Contact Access + Call Initiation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—°ë½ì²˜ ëª©ë¡  â”‚ â”€â”€â–¶ â”‚  ì „í™” ê±¸ê¸°     â”‚ â”€â”€â–¶ â”‚  ìë™ ë…¹ìŒ    â”‚
â”‚  (ê²€ìƒ‰/í•„í„°)  â”‚     â”‚  (ì‹œìŠ¤í…œ ë‹¤ì´ì–¼)â”‚     â”‚  (ë§ˆì´í¬ ìº¡ì²˜) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase B: Full Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë…¹ìŒ    â”‚â”€â”€â–¶â”‚  STT     â”‚â”€â”€â–¶â”‚  Brain   â”‚â”€â”€â–¶â”‚  RAG     â”‚
â”‚  ì¢…ë£Œ    â”‚   â”‚  ë³€í™˜    â”‚   â”‚  ë¶„ì„    â”‚   â”‚  ì‹œë”©    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼              â–¼              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Calendar â”‚  â”‚  Todos   â”‚  â”‚ Knowledgeâ”‚
              â”‚ Events   â”‚  â”‚          â”‚  â”‚ Items    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technical Components

### 1. Tauri Plugin: Contacts (Rust â†’ Native Bridge)

```rust
// src-tauri/src/plugins/contacts.rs
#[tauri::command]
async fn get_contacts() -> Result<Vec<Contact>, String>

#[tauri::command]  
async fn search_contacts(query: String) -> Result<Vec<Contact>, String>
```

### 2. Tauri Plugin: Phone Call (Rust â†’ Native Bridge)

```rust
// src-tauri/src/plugins/phone.rs
#[tauri::command]
async fn make_call(phone_number: String) -> Result<(), String>

#[tauri::command]
async fn get_call_state() -> Result<CallState, String>
```

### 3. Frontend: SmartCallPage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” ì—°ë½ì²˜ ê²€ìƒ‰              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ ê¹€ê²½ì‹         010-xxxx  â”‚  â† íƒ­í•˜ë©´ ì „í™”
â”‚  ğŸ‘¤ ì •ìŠ¹ì±„        010-xxxx  â”‚
â”‚  ğŸ‘¤ Saffaan      +82-xxx   â”‚
â”‚  ...                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ í†µí™” ì¤‘... (01:23)      â”‚
â”‚  ğŸ”´ ë…¹ìŒ ì¤‘                 â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ (íŒŒí˜•)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìµœê·¼ í†µí™”                   â”‚
â”‚  ğŸ“ ê¹€ê²½ì‹  (3ë¶„) - ì™„ë£Œ âœ…   â”‚
â”‚  ğŸ“ ì •ìŠ¹ì±„ (12ë¶„) - ë¶„ì„ì¤‘ğŸ”„â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Android Permissions Required

```xml
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE_MICROPHONE" />
```

## iOS Permissions Required

```
NSContactsUsageDescription â€” ì—°ë½ì²˜ ì ‘ê·¼
NSMicrophoneUsageDescription â€” ë§ˆì´í¬ ë…¹ìŒ
```
