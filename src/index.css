@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
@import 'react-grid-layout/css/styles.css';
@import 'react-resizable/css/styles.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Calendar view toggle - inactive buttons should be dimmed */
.calendar-view-toggle .fc-button-group .fc-button:not(.fc-button-active) {
  opacity: 0.4;
}

.calendar-view-toggle .fc-button-group .fc-button.fc-button-active {
  opacity: 1;
}

@layer base {
  :root {
    /* Core Colors - Refined palette */
    --background: 220 20% 97%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Primary - Deep Indigo */
    --primary: 234 89% 60%;
    --primary-foreground: 0 0% 100%;

    /* Secondary - Soft Gray */
    --secondary: 220 14% 96%;
    --secondary-foreground: 222 47% 11%;

    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;

    --accent: 220 14% 93%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    /* Event Type Colors */
    --event-task: 234 89% 60%;
    --event-deadline: 0 84% 60%;
    --event-meeting: 142 76% 36%;
    --event-pt: 262 83% 58%;
    --event-delivery: 25 95% 53%;

    /* Status Colors */
    --status-active: 142 76% 36%;
    --status-completed: 220 9% 46%;

    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 234 89% 60%;

    --radius: 0.75rem;

    /* Sidebar */
    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 220 14% 96%;
    --sidebar-primary: 234 89% 65%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 222 47% 16%;
    --sidebar-accent-foreground: 220 14% 96%;
    --sidebar-border: 222 47% 16%;
    --sidebar-ring: 234 89% 60%;
    --sidebar-muted: 220 9% 46%;

    /* Shadows — refined for glass depth */
    --shadow-sm: 0 1px 2px 0 hsl(220 14% 10% / 0.04);
    --shadow-md: 0 4px 12px -2px hsl(220 14% 10% / 0.06), 0 2px 4px -1px hsl(220 14% 10% / 0.04);
    --shadow-lg: 0 12px 24px -4px hsl(220 14% 10% / 0.08), 0 4px 8px -2px hsl(220 14% 10% / 0.04);
    --shadow-card: 0 2px 8px -2px hsl(220 14% 10% / 0.05), 0 1px 3px -1px hsl(220 14% 10% / 0.04);

    /* Liquid Glass — enhanced */
    --glass-bg: 0 0% 100% / 0.6;
    --glass-bg-hover: 0 0% 100% / 0.75;
    --glass-border: 0 0% 100% / 0.35;
    --glass-border-subtle: 220 14% 80% / 0.3;
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1), 0 2px 8px 0 rgba(31, 38, 135, 0.06);
    --glass-shadow-hover: 0 12px 40px 0 rgba(31, 38, 135, 0.14), 0 4px 12px 0 rgba(31, 38, 135, 0.08);
    --glass-blur: 24px;
    --glass-inner-glow: inset 0 1px 0 0 rgba(255, 255, 255, 0.4);
    --widget-radius: 1.25rem;
    --widget-gap: 12px;
  }

  .dark {
    --background: 222 47% 5%;
    --foreground: 220 14% 96%;

    --card: 222 47% 8%;
    --card-foreground: 220 14% 96%;

    --popover: 222 47% 8%;
    --popover-foreground: 220 14% 96%;

    --primary: 234 89% 65%;
    --primary-foreground: 0 0% 100%;

    --secondary: 222 47% 14%;
    --secondary-foreground: 220 14% 96%;

    --muted: 222 47% 14%;
    --muted-foreground: 220 14% 70%;

    --accent: 222 47% 16%;
    --accent-foreground: 220 14% 96%;

    --destructive: 0 72% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 222 47% 16%;
    --input: 222 47% 16%;
    --ring: 234 89% 60%;

    --sidebar-background: 222 47% 4%;
    --sidebar-foreground: 220 14% 96%;
    --sidebar-primary: 234 89% 65%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 222 47% 10%;
    --sidebar-accent-foreground: 220 14% 96%;
    --sidebar-border: 222 47% 12%;
    --sidebar-ring: 234 89% 60%;
    --sidebar-muted: 220 9% 50%;

    /* Liquid Glass (dark) — enhanced */
    --glass-bg: 222 47% 10% / 0.6;
    --glass-bg-hover: 222 47% 12% / 0.75;
    --glass-border: 0 0% 100% / 0.08;
    --glass-border-subtle: 0 0% 100% / 0.05;
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3), 0 2px 8px 0 rgba(0, 0, 0, 0.15);
    --glass-shadow-hover: 0 12px 40px 0 rgba(0, 0, 0, 0.35), 0 4px 12px 0 rgba(0, 0, 0, 0.2);
    --glass-inner-glow: inset 0 1px 0 0 rgba(255, 255, 255, 0.06);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Plus Jakarta Sans', 'Inter', system-ui, -apple-system, sans-serif;
    letter-spacing: -0.01em;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }
}

@layer components {
  .nav-link {
    @apply flex items-center gap-3 px-3 py-2 rounded-lg text-sidebar-foreground/70 transition-all duration-200;
  }

  .nav-link:hover {
    @apply bg-sidebar-accent text-sidebar-foreground;
  }

  .nav-link.active {
    @apply bg-sidebar-primary text-sidebar-primary-foreground;
  }

  .page-container {
    @apply p-4 sm:p-6 lg:p-8 space-y-6;
  }

  .page-header {
    @apply flex flex-col sm:flex-row sm:items-center justify-between gap-4;
  }

  .page-title {
    @apply text-xl sm:text-2xl font-semibold text-foreground;
  }

  .card-grid {
    @apply grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
  }

  .event-badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium;
  }

  .event-badge-task {
    @apply bg-primary/10 text-primary;
  }

  .event-badge-deadline {
    @apply bg-destructive/10 text-destructive;
  }

  .event-badge-meeting {
    @apply bg-emerald-500/10 text-emerald-600;
  }

  .event-badge-pt {
    @apply bg-violet-500/10 text-violet-600;
  }

  .event-badge-delivery {
    @apply bg-orange-500/10 text-orange-600;
  }

  .event-badge-todo {
    @apply bg-cyan-500/10 text-cyan-600;
  }

  .event-badge-deliverable {
    @apply bg-amber-500/10 text-amber-600;
  }

  .status-badge {
    @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .status-active {
    @apply bg-emerald-500/10 text-emerald-600;
  }

  .status-completed {
    @apply bg-muted text-muted-foreground;
  }

  /* Interactive Card — glass style */
  .interactive-card {
    @apply rounded-2xl border shadow-card transition-all duration-300;
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(16px) saturate(1.3);
    -webkit-backdrop-filter: blur(16px) saturate(1.3);
    border-color: hsl(var(--glass-border));
  }

  .interactive-card:hover {
    @apply shadow-lg -translate-y-1;
    border-color: hsl(var(--primary) / 0.2);
  }

  /* Hover Scale */
  .hover-scale {
    @apply transition-transform duration-200;
  }

  .hover-scale:hover {
    @apply scale-[1.02];
  }

  /* Hover Lift */
  .hover-lift {
    @apply transition-all duration-200;
  }

  .hover-lift:hover {
    @apply -translate-y-1 shadow-lg;
  }

  /* Focus Ring */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  /* Gradient Text */
  .gradient-text {
    @apply bg-gradient-to-r from-primary to-violet-500 bg-clip-text text-transparent;
  }

  /* Glass Effect (legacy) */
  .glass {
    @apply bg-card/80 backdrop-blur-md border border-border/50;
  }

  /* Liquid Glass — Button variants */
  .glass-button {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(16px) saturate(1.3);
    -webkit-backdrop-filter: blur(16px) saturate(1.3);
    box-shadow: var(--glass-inner-glow), 0 1px 3px 0 rgba(0, 0, 0, 0.06);
  }
  .glass-button:hover {
    background: hsl(var(--glass-bg-hover));
    box-shadow: var(--glass-inner-glow), 0 2px 8px 0 rgba(0, 0, 0, 0.1);
  }

  /* Glass button with accent color (uses --project-accent or primary) */
  .glass-button-accent {
    background: color-mix(in srgb, var(--project-accent, hsl(var(--primary))) 75%, transparent);
    backdrop-filter: blur(16px) saturate(1.3);
    -webkit-backdrop-filter: blur(16px) saturate(1.3);
    box-shadow: var(--glass-inner-glow), 0 2px 8px 0 color-mix(in srgb, var(--project-accent, hsl(var(--primary))) 25%, transparent);
  }
  .glass-button-accent:hover {
    background: color-mix(in srgb, var(--project-accent, hsl(var(--primary))) 85%, transparent);
    box-shadow: var(--glass-inner-glow), 0 4px 12px 0 color-mix(in srgb, var(--project-accent, hsl(var(--primary))) 35%, transparent);
  }

  /* Liquid Glass — Widget cards.
     Background is semi-transparent (via color alpha), but content stays fully opaque.
     NEVER use `opacity` on this element — it would make ALL children transparent. */
  .glass-widget {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(var(--glass-blur)) saturate(1.4);
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(1.4);
    border: 1px solid hsl(var(--glass-border));
    border-radius: var(--widget-radius);
    box-shadow: var(--glass-shadow), var(--glass-inner-glow);
    overflow: hidden;
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
  }
  .glass-widget:hover {
    box-shadow: var(--glass-shadow-hover), var(--glass-inner-glow);
    border-color: hsl(var(--glass-border));
  }

  /* Dark Card — solid dark background for weather, world clock, activity widgets */
  .widget-dark-card {
    background: hsl(222 47% 8%);
    border-radius: var(--widget-radius);
    color: white;
  }
  /* Weather gradient overlay */
  .weather-gradient-bg {
    background: linear-gradient(135deg, hsl(222 47% 12%) 0%, hsl(250 40% 18%) 50%, hsl(220 35% 10%) 100%);
  }
  /* Progress chart gradient */
  .progress-gradient-bg {
    background: linear-gradient(135deg, hsl(234 50% 14%) 0%, hsl(250 40% 20%) 50%, hsl(220 35% 12%) 100%);
  }
  /* Health widget gradient */
  .health-gradient-bg {
    background: linear-gradient(135deg, hsl(200 40% 12%) 0%, hsl(240 35% 18%) 50%, hsl(260 30% 14%) 100%);
  }

  .glass-sidebar {
    background: hsl(var(--sidebar-background) / 0.88);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-right: 1px solid hsl(var(--glass-border));
  }

  /* Liquid Glass — Bottom tab bar */
  .glass-tabbar {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: none;
    box-shadow: 0 -4px 20px 0 rgba(0, 0, 0, 0.06);
  }
  .dark .glass-tabbar {
    box-shadow: 0 -4px 20px 0 rgba(0, 0, 0, 0.25);
  }

  /* Widget area gradient background — ethereal mesh gradient */
  .widget-area-bg {
    background: 
      radial-gradient(ellipse at 20% 50%, hsl(210 100% 60% / 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, hsl(262 83% 58% / 0.12) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, hsl(234 89% 55% / 0.1) 0%, transparent 50%),
      linear-gradient(145deg,
        hsl(210 100% 96%) 0%,
        hsl(234 89% 95%) 50%,
        hsl(262 83% 96%) 100%);
  }
  .dark .widget-area-bg {
    background: 
      radial-gradient(ellipse at 20% 50%, hsl(210 100% 60% / 0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, hsl(262 83% 58% / 0.05) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, hsl(234 89% 55% / 0.04) 0%, transparent 50%),
      linear-gradient(145deg,
        hsl(222 47% 5%) 0%,
        hsl(234 50% 8%) 50%,
        hsl(262 40% 8%) 100%);
  }

  /* Project background area — when project has a thumbnail */
  .project-bg-area {
    position: relative;
  }

  /* Widget title bar */
  .widget-titlebar {
    @apply flex items-center justify-between px-4 py-2.5
           border-b cursor-grab select-none;
    border-color: hsl(var(--glass-border-subtle));
    background: hsl(0 0% 100% / 0.15);
  }
  .widget-titlebar:active {
    cursor: grabbing;
  }
  .dark .widget-titlebar {
    background: hsl(0 0% 100% / 0.04);
    border-color: hsl(0 0% 100% / 0.05);
  }

  /* Widget content area */
  .widget-content {
    @apply p-3 h-full overflow-auto;
  }

  /* Chat widget — frameless, minimal drag handle */
  .chat-widget-handle {
    @apply flex items-center justify-between px-3 py-1.5
           cursor-grab select-none;
    background: hsl(var(--glass-border));
    border-bottom: 1px solid hsl(var(--border) / 0.3);
  }
  .chat-widget-handle:active {
    cursor: grabbing;
  }

  /* Widget resize handles (react-grid-layout v2) */
  .react-resizable-handle {
    position: absolute;
    z-index: 10;
  }
  /* Edge handles — thin invisible strips */
  .react-resizable-handle-s { bottom: 0; left: 8px; right: 8px; height: 6px; cursor: s-resize; }
  .react-resizable-handle-n { top: 0; left: 8px; right: 8px; height: 6px; cursor: n-resize; }
  .react-resizable-handle-e { right: 0; top: 8px; bottom: 8px; width: 6px; cursor: e-resize; }
  .react-resizable-handle-w { left: 0; top: 8px; bottom: 8px; width: 6px; cursor: w-resize; }
  /* Corner handles — small squares */
  .react-resizable-handle-se { bottom: 0; right: 0; width: 12px; height: 12px; cursor: se-resize; }
  .react-resizable-handle-sw { bottom: 0; left: 0; width: 12px; height: 12px; cursor: sw-resize; }
  .react-resizable-handle-ne { top: 0; right: 0; width: 12px; height: 12px; cursor: ne-resize; }
  .react-resizable-handle-nw { top: 0; left: 0; width: 12px; height: 12px; cursor: nw-resize; }
  /* Show indicator on hover */
  .react-grid-item:hover .react-resizable-handle-se,
  .react-grid-item:hover .react-resizable-handle-sw,
  .react-grid-item:hover .react-resizable-handle-ne,
  .react-grid-item:hover .react-resizable-handle-nw {
    background: radial-gradient(circle, hsl(var(--primary) / 0.6) 1.5px, transparent 1.5px);
    background-size: 4px 4px;
    background-position: center;
  }
  .react-grid-item:hover .react-resizable-handle-s,
  .react-grid-item:hover .react-resizable-handle-n,
  .react-grid-item:hover .react-resizable-handle-e,
  .react-grid-item:hover .react-resizable-handle-w {
    background: hsl(var(--primary) / 0.15);
    border-radius: 3px;
  }

  /* Shimmer Animation */
  .shimmer {
    @apply relative overflow-hidden;
  }

  .shimmer::after {
    content: '';
    @apply absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/10 to-transparent;
    animation: shimmer 2s infinite;
  }
}

/* ==========================================================================
   WIDGET GRID OVERRIDES — outside @layer for higher CSS specificity.
   These MUST override react-grid-layout/css/styles.css and html * rules.
   ========================================================================== */

/* Kill all react-grid-layout transitions — widgets appear instantly */
.react-grid-layout {
  transition: none !important;
}
.react-grid-item {
  transition: none !important;
}
.react-grid-item.cssTransforms {
  transition: none !important;
}
.react-grid-item.react-draggable-dragging {
  transition: none !important;
}
.react-grid-item.resizing {
  transition: none !important;
}

/* Exclude widget elements from the global html * transition-colors rule */
.glass-widget,
.glass-widget *,
.widget-item-idle,
.widget-item-active,
.react-grid-item,
.react-grid-layout {
  transition-property: none !important;
  transition-duration: 0s !important;
}

/* Widget idle: semi-transparent BACKGROUND only (liquid glass).
   Content (text, icons, buttons) stays fully opaque. */
.widget-item-idle {
  height: 100%;
}
.widget-item-idle .glass-widget {
  background: hsl(0 0% 100% / 0.5) !important;
  backdrop-filter: blur(var(--glass-blur)) saturate(1.4);
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(1.4);
  box-shadow: var(--glass-shadow), var(--glass-inner-glow) !important;
}
.dark .widget-item-idle .glass-widget {
  background: hsl(222 47% 10% / 0.5) !important;
}
.widget-item-idle:hover .glass-widget {
  background: hsl(0 0% 100% / 0.7) !important;
  box-shadow: var(--glass-shadow-hover), var(--glass-inner-glow) !important;
}
.dark .widget-item-idle:hover .glass-widget {
  background: hsl(222 47% 12% / 0.7) !important;
}

/* Widget active (drag/resize): solid opaque background, no glass effect */
.widget-item-active {
  height: 100%;
  z-index: 20 !important;
}
.widget-item-active .glass-widget {
  background: #ffffff !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border-color: hsl(var(--primary) / 0.35) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.18), 0 0 0 2px hsl(var(--primary) / 0.35) !important;
}
.dark .widget-item-active .glass-widget {
  background: #0e1629 !important;
}

/* Project accent color — applied via --project-accent CSS variable */
/* Exclude the FAB popup from accent bleeding — only widget grid items get accent */
[style*="--project-accent"] .react-grid-item .glass-widget {
  border-color: var(--project-accent, hsl(var(--glass-border)));
  border-width: 1.5px;
}
[style*="--project-accent"] .react-grid-item .widget-titlebar {
  background: color-mix(in srgb, var(--project-accent) 15%, hsl(var(--glass-border)));
}
[style*="--project-accent"] .react-grid-item .chat-widget-handle {
  background: color-mix(in srgb, var(--project-accent) 15%, hsl(var(--glass-border)));
}
[style*="--project-accent"] .widget-item-active .glass-widget {
  box-shadow: 0 8px 32px rgba(0,0,0,0.18), 0 0 0 2px var(--project-accent) !important;
  border-color: var(--project-accent) !important;
}
.dark [style*="--project-accent"] .react-grid-item .widget-titlebar {
  background: color-mix(in srgb, var(--project-accent) 10%, hsl(222 47% 11%));
}
.dark [style*="--project-accent"] .react-grid-item .chat-widget-handle {
  background: color-mix(in srgb, var(--project-accent) 10%, hsl(222 47% 11%));
}

/* Project accent — override buttons/icons only inside grid items */
[style*="--project-accent"] .react-grid-item button[class*="bg-primary"] {
  background: color-mix(in srgb, var(--project-accent) 90%, transparent) !important;
  border-color: color-mix(in srgb, var(--project-accent) 40%, transparent) !important;
}
[style*="--project-accent"] .react-grid-item button[class*="bg-primary"]:hover {
  background: var(--project-accent) !important;
}
[style*="--project-accent"] .react-grid-item .text-primary {
  color: var(--project-accent) !important;
}
[style*="--project-accent"] .react-grid-item .text-primary\/70 {
  color: color-mix(in srgb, var(--project-accent) 70%, transparent) !important;
}
/* Project accent for primary ring */
[style*="--project-accent"] .ring-primary {
  --tw-ring-color: var(--project-accent) !important;
}
/* FAB + button in project context */
[style*="--project-accent"] .bg-primary {
  background-color: var(--project-accent) !important;
}
[style*="--project-accent"] .hover\:bg-primary\/90:hover {
  background-color: color-mix(in srgb, var(--project-accent) 90%, transparent) !important;
}

/* Project accent — FullCalendar buttons */
[style*="--project-accent"] .fc-button-primary {
  background-color: color-mix(in srgb, var(--project-accent) 15%, transparent) !important;
  border-color: color-mix(in srgb, var(--project-accent) 30%, transparent) !important;
  color: var(--project-accent) !important;
}
[style*="--project-accent"] .fc-button-primary:hover {
  background-color: color-mix(in srgb, var(--project-accent) 25%, transparent) !important;
  border-color: color-mix(in srgb, var(--project-accent) 50%, transparent) !important;
}
[style*="--project-accent"] .fc-button-primary.fc-button-active,
[style*="--project-accent"] .fc-button-primary:not(:disabled):active {
  background-color: var(--project-accent) !important;
  border-color: var(--project-accent) !important;
  color: white !important;
}
[style*="--project-accent"] .fc-button-primary:focus {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--project-accent) 30%, transparent) !important;
}
[style*="--project-accent"] .fc-today-button:not(:disabled) {
  background-color: var(--project-accent) !important;
  border-color: var(--project-accent) !important;
  color: white !important;
}
/* Project accent — today indicator circle */
[style*="--project-accent"] .calendar-widget-content .fc .fc-day-today .fc-daygrid-day-number {
  background: var(--project-accent) !important;
}
/* Project accent — dark mode today background */
.dark [style*="--project-accent"] .fc-daygrid-day.fc-day-today {
  background-color: color-mix(in srgb, var(--project-accent) 10%, transparent) !important;
}
/* Project accent — now-indicator line in week/day view */
[style*="--project-accent"] .fc .fc-timegrid-now-indicator-line {
  border-color: var(--project-accent) !important;
}
[style*="--project-accent"] .fc .fc-timegrid-now-indicator-arrow {
  border-color: var(--project-accent) !important;
  color: var(--project-accent) !important;
}

/* ─── Chat widget overflow containment ───
   The chat widget is rendered as a "frameless" widget: glass-widget → flex-col → overflow-hidden → ChatPanel.
   Radix ScrollArea Viewport creates an internal scrollable div that can expand horizontally.
   These rules ensure NOTHING inside the chat widget exceeds the widget boundary. */

/* 1. All direct children of the chat glass-widget */
[data-widget-id="chat"],
[data-widget-id="chat"] > div {
  overflow: hidden;
  max-width: 100%;
  min-width: 0;
}

/* 2. ScrollArea viewport: block horizontal scroll, constrain content.
   Radix applies `display: table` + `min-width: 100%` on viewport's child,
   which causes it to expand beyond container. Override both. */
[data-widget-id="chat"] [data-radix-scroll-area-viewport] {
  overflow-x: hidden !important;
}
[data-widget-id="chat"] [data-radix-scroll-area-viewport] > div {
  display: block !important;
  max-width: 100% !important;
  min-width: 0 !important;
}

/* 3. Every div inside the chat widget must respect container width */
[data-widget-id="chat"] div {
  max-width: 100%;
  min-width: 0;
}

/* 4. Text content: force long words / URLs to break */
[data-widget-id="chat"] p,
[data-widget-id="chat"] span,
[data-widget-id="chat"] a {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* ═══════════════════════════════════════════════════════════════
   APPLE CALENDAR STYLE — clean, minimal FullCalendar overrides
   ═══════════════════════════════════════════════════════════════ */

/* Calendar widget — compact toolbar and fit-to-widget */
.calendar-widget-content {
  overflow: hidden;
}
.calendar-widget-content .fc {
  width: 100%;
  max-width: 100%;
  overflow: hidden;
}
.calendar-widget-content .fc .fc-view-harness {
  overflow: hidden;
}
.calendar-widget-content .fc table {
  table-layout: fixed;
  width: 100% !important;
}
.calendar-widget-content .fc .fc-scrollgrid {
  width: 100% !important;
  overflow: hidden;
  border: none !important;
}
.calendar-widget-content .fc .fc-daygrid-body {
  width: 100% !important;
}
.calendar-widget-content .fc .fc-daygrid-body table {
  width: 100% !important;
}
.calendar-widget-content .fc .fc-col-header {
  width: 100% !important;
}

/* ── Toolbar: Apple-style large title + subtle controls ── */
.calendar-widget-content .fc .fc-toolbar {
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  flex-wrap: nowrap;
  padding: 0.25rem 0.5rem;
}
.calendar-widget-content .fc .fc-toolbar-title {
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  color: hsl(var(--foreground));
}

/* ── Buttons: pill-shaped, subtle ── */
.calendar-widget-content .fc .fc-button {
  font-size: 11px;
  padding: 3px 8px;
  font-weight: 500;
  background: transparent !important;
  border: none !important;
  color: hsl(var(--primary)) !important;
  box-shadow: none !important;
  border-radius: 1rem !important;
  transition: background 0.15s;
}
.calendar-widget-content .fc .fc-button:hover {
  background: hsl(var(--primary) / 0.08) !important;
}
.calendar-widget-content .fc .fc-button-primary:not(:disabled).fc-button-active {
  background: hsl(var(--primary)) !important;
  color: white !important;
}
.calendar-widget-content .fc .fc-today-button {
  font-size: 11px;
  padding: 3px 10px;
  background: hsl(var(--primary) / 0.08) !important;
  color: hsl(var(--primary)) !important;
  border: none !important;
  font-weight: 600;
}
.calendar-widget-content .fc .fc-today-button:hover {
  background: hsl(var(--primary) / 0.15) !important;
}
.calendar-widget-content .fc .fc-prev-button,
.calendar-widget-content .fc .fc-next-button {
  padding: 2px 4px;
}

/* ── Button group: pill bar ── */
.calendar-widget-content .fc .fc-button-group {
  background: hsl(var(--muted));
  border-radius: 1rem;
  padding: 1px;
}
.calendar-widget-content .fc .fc-button-group > .fc-button {
  border-radius: 0.875rem !important;
  margin-left: 1px !important;
}
.calendar-widget-content .fc .fc-button-group > .fc-button:first-child {
  margin-left: 0 !important;
}

/* ── Column headers: uppercase weekday labels ── */
.calendar-widget-content .fc .fc-col-header-cell {
  font-size: 11px;
  padding: 4px 0;
  border: none !important;
}
.calendar-widget-content .fc .fc-col-header-cell-cushion {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: hsl(var(--muted-foreground));
  padding: 4px 0;
}

/* ── Grid: minimal borders ── */
.calendar-widget-content .fc .fc-scrollgrid td,
.calendar-widget-content .fc .fc-scrollgrid th {
  border-color: hsl(var(--border) / 0.5) !important;
}
.calendar-widget-content .fc .fc-scrollgrid {
  border: none !important;
}
.calendar-widget-content .fc td:first-child {
  border-left: none !important;
}
.calendar-widget-content .fc td:last-child {
  border-right: none !important;
}
.calendar-widget-content .fc .fc-scrollgrid > thead > tr > th {
  border-bottom: 1px solid hsl(var(--border) / 0.3) !important;
}

/* ── Day numbers ── */
.calendar-widget-content .fc .fc-daygrid-day-number {
  font-size: 13px;
  padding: 3px 6px;
  font-weight: 500;
  color: hsl(var(--foreground));
}
/* Today: red/blue circle around the day number */
.calendar-widget-content .fc .fc-day-today .fc-daygrid-day-number {
  background: hsl(var(--primary));
  color: white;
  border-radius: 50%;
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  margin: 2px;
  padding: 0;
}
/* Today background */
.calendar-widget-content .fc .fc-day-today {
  background: transparent !important;
}
/* Other month days */
.calendar-widget-content .fc .fc-day-other .fc-daygrid-day-number {
  color: hsl(var(--muted-foreground) / 0.4);
}

/* ── Events: Apple-style colored left border blocks ── */
.calendar-widget-content .fc .fc-daygrid-event {
  font-size: 11px;
  padding: 1px 4px;
  margin: 0 2px 1px;
  border-radius: 4px !important;
  border: none !important;
  border-left: 3px solid var(--fc-event-border-color, hsl(var(--primary))) !important;
  background: var(--fc-event-bg-color, hsl(var(--primary) / 0.12)) !important;
  color: hsl(var(--foreground)) !important;
  box-shadow: none !important;
  transition: transform 0.1s;
}
.calendar-widget-content .fc .fc-daygrid-event:hover {
  transform: scale(1.02);
}
/* Override dot events */
.calendar-widget-content .fc .fc-daygrid-dot-event {
  background: transparent !important;
  border-left: 3px solid var(--fc-event-border-color, hsl(var(--primary))) !important;
}

/* ── Week/Day time grid events ── */
.calendar-widget-content .fc .fc-timegrid-event {
  border-radius: 6px !important;
  border: none !important;
  border-left: 3px solid var(--fc-event-border-color, hsl(var(--primary))) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}

/* ── Week view: all-day slot at top (Google Calendar style) ── */
.calendar-widget-content .fc .fc-timegrid .fc-daygrid-body {
  border-bottom: 1px solid hsl(var(--border) / 0.5);
}
.calendar-widget-content .fc .fc-timegrid-axis-cushion {
  font-size: 10px;
  color: hsl(var(--muted-foreground));
}
.calendar-widget-content .fc .fc-daygrid-event-harness {
  margin: 0 1px;
}

/* ── List view ── */
.calendar-widget-content .fc .fc-list {
  border: none !important;
}
.calendar-widget-content .fc .fc-list-event:hover td {
  background: hsl(var(--accent)) !important;
}

/* ── FullCalendar Global Variables ── */
.fc {
  --fc-border-color: hsl(var(--border));
  --fc-button-bg-color: hsl(var(--primary));
  --fc-button-border-color: hsl(var(--primary));
  --fc-button-hover-bg-color: hsl(var(--primary) / 0.9);
  --fc-button-hover-border-color: hsl(var(--primary) / 0.9);
  --fc-button-active-bg-color: hsl(var(--primary) / 0.8);
  --fc-button-active-border-color: hsl(var(--primary) / 0.8);
  --fc-today-bg-color: transparent;
  --fc-event-bg-color: hsl(var(--primary) / 0.12);
  --fc-event-border-color: hsl(var(--primary));
  --fc-page-bg-color: transparent;
  --fc-neutral-bg-color: hsl(var(--muted));
  --fc-list-event-hover-bg-color: hsl(var(--accent));
}

.fc .fc-toolbar-title {
  @apply text-base sm:text-lg font-bold text-foreground;
  letter-spacing: -0.02em;
}

.fc .fc-button {
  @apply text-xs sm:text-sm font-medium shadow-none;
  border-radius: 1rem !important;
}
.fc .fc-button-group > .fc-button {
  border-radius: 0.875rem !important;
  margin-left: 2px !important;
}
.fc .fc-button-group > .fc-button:first-child {
  margin-left: 0 !important;
}
.fc .fc-button-primary:not(:disabled):active,
.fc .fc-button-primary:not(:disabled).fc-button-active {
  @apply bg-primary;
}

.fc .fc-col-header-cell-cushion {
  @apply text-[10px] sm:text-xs font-semibold text-muted-foreground uppercase tracking-wider py-2;
}
.fc .fc-daygrid-day-number {
  @apply text-xs sm:text-sm text-foreground p-1 sm:p-2;
}
.fc .fc-event {
  @apply text-[10px] sm:text-xs border-0 cursor-pointer;
  border-radius: 4px !important;
}

/* Mobile Calendar Adjustments */
@media (max-width: 640px) {
  .fc .fc-toolbar {
    @apply flex-col gap-2;
  }
  .fc .fc-toolbar-chunk {
    @apply flex items-center justify-center;
  }
  .fc .fc-daygrid-day-frame {
    @apply min-h-[60px];
  }
}

/* Event Type Colors */
.fc-event-task { background-color: hsl(var(--event-task) / 0.15) !important; border-left-color: hsl(var(--event-task)) !important; }
.fc-event-deadline { background-color: hsl(var(--event-deadline) / 0.15) !important; border-left-color: hsl(var(--event-deadline)) !important; }
.fc-event-meeting { background-color: hsl(var(--event-meeting) / 0.15) !important; border-left-color: hsl(var(--event-meeting)) !important; }
.fc-event-pt { background-color: hsl(var(--event-pt) / 0.15) !important; border-left-color: hsl(var(--event-pt)) !important; }
.fc-event-delivery { background-color: hsl(var(--event-delivery) / 0.15) !important; border-left-color: hsl(var(--event-delivery)) !important; }
.fc-event-todo { background-color: hsl(188 94% 43% / 0.15) !important; border-left-color: hsl(188 94% 43%) !important; }
.fc-event-todo.completed { opacity: 0.5; }
.fc-event-training { background-color: hsl(270 70% 55% / 0.15) !important; border-left-color: hsl(270 70% 55%) !important; }

.event-badge-training {
  @apply bg-purple-500/10 text-purple-600 border-purple-500/30;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.2);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.4);
}

/* Animation utilities */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(4px);
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(100%);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-out-right {
  from {
    opacity: 1;
    transform: translateX(0);
  }

  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes shimmer {
  100% {
    transform: translateX(100%);
  }
}

@keyframes pulse-soft {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.6;
  }
}

@keyframes bounce-soft {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-4px);
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

.animate-fade-out {
  animation: fade-out 0.3s ease-out;
}

.animate-slide-in-left {
  animation: slide-in-left 0.3s ease-out;
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

.animate-slide-out-right {
  animation: slide-out-right 0.3s ease-out;
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out;
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}

.animate-bounce-soft {
  animation: bounce-soft 1s ease-in-out infinite;
}

/* Staggered Animation Delays */
.stagger-1 {
  animation-delay: 0.05s;
}

.stagger-2 {
  animation-delay: 0.1s;
}

.stagger-3 {
  animation-delay: 0.15s;
}

.stagger-4 {
  animation-delay: 0.2s;
}

.stagger-5 {
  animation-delay: 0.25s;
}

/* Transition Utilities */
.transition-default {
  @apply transition-all duration-200 ease-out;
}

.transition-slow {
  @apply transition-all duration-300 ease-out;
}

.transition-fast {
  @apply transition-all duration-150 ease-out;
}

/* Dark Mode Enhancements */
.dark {
  /* Enhanced shadows for dark mode */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
  --shadow-card: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px -1px rgba(0, 0, 0, 0.3);
}

/* Dark mode specific adjustments */
.dark .card {
  @apply bg-card/50 backdrop-blur-sm;
}

.dark .border {
  @apply border-border/50;
}

/* Smooth theme transition — exclude widget grid elements to prevent
   transparent flickering on active widgets and animation on tab switch */
html {
  @apply transition-colors duration-300;
}

html *:not(.react-grid-item):not(.react-grid-layout):not(.glass-widget):not(.widget-item-idle):not(.widget-item-active) {
  @apply transition-colors duration-200;
}

/* Dark mode chart improvements */
.dark .recharts-cartesian-grid-horizontal line,
.dark .recharts-cartesian-grid-vertical line {
  @apply stroke-border/30;
}

.dark .recharts-text {
  @apply fill-muted-foreground;
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track {
  @apply bg-background;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-muted rounded-full;
}

.dark ::-webkit-scrollbar-thumb:hover {
  @apply bg-muted-foreground/50;
}

/* Dark mode selection */
.dark ::selection {
  @apply bg-primary/30 text-primary-foreground;
}

/* Dark mode focus rings */
.dark *:focus-visible {
  @apply ring-primary/50;
}

/* Improved contrast for dark mode badges */
.dark .badge {
  @apply border-border/50;
}

/* Dark mode calendar improvements */
.dark .fc-theme-standard td,
.dark .fc-theme-standard th {
  @apply border-border/30;
}

.dark .fc-theme-standard .fc-scrollgrid {
  @apply border-border/30;
}

.dark .fc-col-header-cell {
  @apply bg-muted/30;
}

.dark .fc-daygrid-day.fc-day-today {
  @apply bg-primary/10;
}

/* Dark mode table improvements */
.dark table {
  @apply border-border/30;
}

.dark th {
  @apply bg-muted/30 border-border/30;
}

.dark td {
  @apply border-border/30;
}

/* Dark mode input improvements */
.dark input,
.dark textarea,
.dark select {
  @apply bg-background/50 border-border/50;
}

.dark input:focus,
.dark textarea:focus,
.dark select:focus {
  @apply border-primary/50 ring-primary/20;
}

/* Dark mode button improvements */
.dark button:hover {
  @apply brightness-110;
}

/* Dark mode dropdown improvements */
.dark [role="menu"],
.dark [role="listbox"] {
  @apply bg-popover/95 backdrop-blur-md border-border/50;
}

/* Dark mode tooltip improvements */
.dark [role="tooltip"] {
  @apply bg-popover/95 backdrop-blur-md border-border/50;
}

/* Dark mode modal improvements */
.dark [role="dialog"] {
  @apply bg-card/95 backdrop-blur-md border-border/50;
}

/* Performance: Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}